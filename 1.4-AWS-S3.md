# 1.4 AWS S3

## 1.4.1 AWS S3 Security

- S3 is private by default. Any other permissions explicitly granted.
- S3 buckets use **resource** policies.
  - Like identity policies, but attached to a bucket
  - resource perspective permissions: who can access bucket, etc.
- Identity policies can only be attached to identities in own account;
  - Have no way using Identity policy to control access to another account
  - Attaching policy to resource allows controlling access to same and different
    accounts.
- Resource Policies allow/deny anonymous principals (anon access).

- S3 resource policies have express `"Principal"` inside of statement.

### When to use Identity vs Resource Policy
- Identity
  - Controlling many different resources
  - You have a preference for mananging permission in IAM
  - Using same account
- Resource/Bucket
  - Just controlling S3
  - Anonymous or Cross-Account
- ACLs: Never use unless absolutely need to

### Block Public Access

- Used as a big hammer for blocking public access. Bypasses any resource
  policies and locks down public access.

### Access Control Lists (ACLs)

- Legacy, AWS dont recommend; inflexible and simple permissions.

## 1.4.2 AWS S3 Static Hosting

- Static hosting requires an index and error document
- When static hosting is enabled on bucket, website endpoint is created
- Custom Domain name must match bucket name via R53

- Always consider offloading any large data to S3 bucket to avoid high compute
  costs. Cheaper to host from dedicated S3 than compute server.
- S3 is great for Out-of-band pages (maintenance page, server error etc)
